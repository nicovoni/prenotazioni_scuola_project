# Generated by Django 5.2.8 on 2025-11-24 10:17

import django.db.models.deletion
import prenotazioni.models
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='CategoriaDispositivo',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nome', models.CharField(default='', max_length=100, unique=True)),
                ('descrizione', models.TextField(blank=True)),
                ('icona', models.CharField(blank=True, help_text='Nome icona Bootstrap', max_length=50)),
                ('colore', models.CharField(default='#007bff', help_text='Codice colore HEX', max_length=7)),
                ('attiva', models.BooleanField(default=True)),
                ('ordine', models.PositiveIntegerField(default=0)),
            ],
            options={
                'verbose_name': 'Categoria Dispositivo',
                'verbose_name_plural': 'Categorie Dispositivi',
                'ordering': ['ordine', 'nome'],
            },
        ),
        migrations.CreateModel(
            name='InformazioniScuola',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nome_completo_scuola', models.CharField(help_text='Nome formale e completo della scuola', max_length=200, verbose_name='Nome Completo Scuola')),
                ('nome_breve_scuola', models.CharField(help_text='Nome abbreviato per interfaccia utente', max_length=100, verbose_name='Nome Breve Scuola')),
                ('codice_meccanografico_scuola', models.CharField(help_text='Codice ufficiale di identificazione', max_length=10, unique=True, verbose_name='Codice Meccanografico')),
                ('partita_iva_scuola', models.CharField(blank=True, help_text='Partita IVA della scuola', max_length=20, verbose_name='Partita IVA Scuola')),
                ('sito_web_scuola', models.URLField(help_text='Sito web ufficiale della scuola', verbose_name='Sito Web Scuola')),
                ('email_istituzionale_scuola', models.EmailField(help_text='Email principale della scuola', max_length=254, verbose_name='Email Istituzionale')),
                ('telefono_scuola', models.CharField(blank=True, help_text='Numero di telefono principale', max_length=20, verbose_name='Telefono Scuola')),
                ('fax_scuola', models.CharField(blank=True, max_length=20, verbose_name='Fax Scuola')),
                ('indirizzo_scuola', models.TextField(help_text='Indirizzo secondo standard Google Maps', verbose_name='Indirizzo Completo Scuola')),
                ('codice_postale_scuola', models.CharField(help_text='Codice di avviamento postale', max_length=10, verbose_name='Codice Postale scuola')),
                ('comune_scuola', models.CharField(help_text='Comune di appartenenza', max_length=100, verbose_name='Comune Scuola')),
                ('provincia_scuola', models.CharField(help_text='Sigla provincia (es: GR, RM, MI)', max_length=50, verbose_name='Provincia Scuola')),
                ('regione_scuola', models.CharField(help_text='Regione di appartenenza', max_length=50, verbose_name='Regione Scuola')),
                ('nazione_scuola', models.CharField(default='Italia', max_length=50, verbose_name='Nazione Scuola')),
                ('latitudine_scuola', models.DecimalField(blank=True, decimal_places=8, max_digits=10, null=True, verbose_name='Latitudine Scuola')),
                ('longitudine_scuola', models.DecimalField(blank=True, decimal_places=8, max_digits=11, null=True, verbose_name='Longitudine Scuola')),
                ('scuola_attiva', models.BooleanField(default=True)),
                ('data_creazione_scuola', models.DateTimeField(auto_now_add=True)),
                ('data_modifica_scuola', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Informazioni Scuola',
                'verbose_name_plural': 'Informazioni Scuola',
            },
        ),
        migrations.CreateModel(
            name='StatoPrenotazione',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nome', models.CharField(max_length=50, unique=True)),
                ('descrizione', models.TextField()),
                ('colore', models.CharField(default='#007bff', max_length=7)),
                ('icon', models.CharField(blank=True, max_length=50)),
                ('ordine', models.PositiveIntegerField(default=0)),
            ],
            options={
                'verbose_name': 'Stato Prenotazione',
                'verbose_name_plural': 'Stati Prenotazioni',
                'ordering': ['ordine'],
            },
        ),
        migrations.CreateModel(
            name='TemplateNotifica',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nome', models.CharField(max_length=100, unique=True)),
                ('tipo', models.CharField(choices=[('email', 'Email'), ('sms', 'SMS'), ('push', 'Notifica Push'), ('in_app', 'In-App')], max_length=20)),
                ('evento', models.CharField(help_text='Evento che triggera la notifica', max_length=50)),
                ('oggetto', models.CharField(help_text='Per email/SMS', max_length=200)),
                ('contenuto', models.TextField(help_text='Template con variabili {{variable}}')),
                ('attivo', models.BooleanField(default=True)),
                ('creato_il', models.DateTimeField(auto_now_add=True)),
                ('modificato_il', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Template Notifica',
                'verbose_name_plural': 'Template Notifiche',
            },
        ),
        migrations.CreateModel(
            name='UbicazioneRisorsa',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nome', models.CharField(max_length=100, unique=True)),
                ('descrizione', models.TextField(blank=True)),
                ('edificio', models.CharField(max_length=50)),
                ('piano', models.CharField(max_length=20)),
                ('aula', models.CharField(max_length=50)),
                ('capacita_persone', models.PositiveIntegerField(default=0)),
                ('attrezzature_presenti', models.JSONField(blank=True, default=list)),
                ('coordinate_x', models.DecimalField(blank=True, decimal_places=2, max_digits=8, null=True)),
                ('coordinate_y', models.DecimalField(blank=True, decimal_places=2, max_digits=8, null=True)),
                ('attivo', models.BooleanField(default=True)),
            ],
            options={
                'verbose_name': 'Localizzazione',
                'verbose_name_plural': 'Localizzazioni',
                'ordering': ['edificio', 'piano', 'aula'],
            },
        ),
        migrations.CreateModel(
            name='CaricamentoFile',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('file', models.FileField(upload_to='uploads/%Y/%m/%d/')),
                ('nome_originale', models.CharField(max_length=255)),
                ('dimensione', models.PositiveIntegerField(help_text='Dimensione in bytes')),
                ('tipo_mime', models.CharField(max_length=100)),
                ('tipo_file', models.CharField(choices=[('document', 'Documento'), ('image', 'Immagine'), ('video', 'Video'), ('audio', 'Audio'), ('archive', 'Archivio'), ('other', 'Altro')], max_length=20)),
                ('titolo', models.CharField(blank=True, max_length=200)),
                ('descrizione', models.TextField(blank=True)),
                ('tags', models.JSONField(blank=True, default=list)),
                ('checksum', models.CharField(blank=True, help_text='SHA256 hash', max_length=64)),
                ('virus_scanned', models.BooleanField(default=False)),
                ('scan_result', models.CharField(blank=True, max_length=20)),
                ('pubblico', models.BooleanField(default=False)),
                ('attivo', models.BooleanField(default=True)),
                ('download_count', models.PositiveIntegerField(default=0)),
                ('ultimo_download', models.DateTimeField(blank=True, null=True)),
                ('creato_il', models.DateTimeField(auto_now_add=True)),
                ('modificato_il', models.DateTimeField(auto_now=True)),
                ('caricato_da', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='file_caricati', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'File Caricato',
                'verbose_name_plural': 'File Caricati',
                'ordering': ['-creato_il'],
            },
        ),
        migrations.CreateModel(
            name='ConfigurazioneSistema',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('chiave_configurazione', models.CharField(help_text='Identificatore univoco (es: HOST_EMAIL, ORA_INIZIO_PRENOTAZIONI)', max_length=100, unique=True, verbose_name='Chiave Configurazione')),
                ('valore_configurazione', models.TextField(help_text='Valore della configurazione', verbose_name='Valore')),
                ('tipo_configurazione', models.CharField(choices=[('email', 'Email/SMTP'), ('prenotazioni', 'Prenotazioni'), ('sistema', 'Sistema'), ('interfaccia', 'Interfaccia'), ('sicurezza', 'Sicurezza')], help_text='Categoria della configurazione', max_length=20, verbose_name='Tipo Configurazione')),
                ('descrizione_configurazione', models.TextField(blank=True, help_text='Descrizione della configurazione', verbose_name='Descrizione')),
                ('configurazione_modificabile', models.BooleanField(default=True, help_text='Se la configurazione può essere modificata da amministratore', verbose_name='Modificabile')),
                ('data_creazione_configurazione', models.DateTimeField(auto_now_add=True)),
                ('data_modifica_configurazione', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Configurazione Sistema',
                'verbose_name_plural': 'Configurazioni Sistema',
                'ordering': ['tipo_configurazione', 'chiave_configurazione'],
                'indexes': [models.Index(fields=['chiave_configurazione'], name='prenotazion_chiave__f62b83_idx'), models.Index(fields=['tipo_configurazione'], name='prenotazion_tipo_co_025b19_idx')],
            },
        ),
        migrations.CreateModel(
            name='Dispositivo',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nome', models.CharField(default='', max_length=100, verbose_name='Nome')),
                ('modello', models.CharField(blank=True, max_length=100)),
                ('marca', models.CharField(max_length=100, verbose_name='Marca/Produttore')),
                ('serie', models.CharField(blank=True, help_text='Numero di serie', max_length=100)),
                ('codice_inventario', models.CharField(max_length=50, unique=True, verbose_name='Codice Inventario')),
                ('tipo', models.CharField(choices=[('laptop', 'Laptop/Notebook'), ('desktop', 'Computer Desktop'), ('tablet', 'Tablet'), ('smartphone', 'Smartphone'), ('projector', 'Proiettore'), ('smartboard', 'Lavagna Interattiva'), ('camera', 'Videocamera'), ('audio', 'Attrezzatura Audio'), ('network', 'Attrezzatura Rete'), ('altro', 'Altro')], max_length=20, verbose_name='Tipo Dispositivo')),
                ('specifiche', models.JSONField(blank=True, default=dict, help_text='CPU, RAM, Storage, OS, etc.', verbose_name='Specifiche Tecniche')),
                ('stato', models.CharField(choices=[('disponibile', 'Disponibile'), ('in_uso', 'In Uso'), ('manutenzione', 'In Manutenzione'), ('danneggiato', 'Danneggiato'), ('smarrito', 'Smarrito'), ('ritirato', 'Ritirato')], default='disponibile', max_length=20)),
                ('attivo', models.BooleanField(default=True)),
                ('edificio', models.CharField(blank=True, max_length=50)),
                ('piano', models.CharField(blank=True, max_length=20)),
                ('aula', models.CharField(blank=True, max_length=50)),
                ('armadio', models.CharField(blank=True, max_length=50)),
                ('data_acquisto', models.DateField(blank=True, null=True)),
                ('data_scadenza_garanzia', models.DateField(blank=True, null=True)),
                ('valore_acquisto', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('note', models.TextField(blank=True)),
                ('ultimo_controllo', models.DateTimeField(blank=True, null=True)),
                ('prossima_manutenzione', models.DateTimeField(blank=True, null=True)),
                ('creato_il', models.DateTimeField(auto_now_add=True)),
                ('modificato_il', models.DateTimeField(auto_now=True)),
                ('categoria', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='prenotazioni.categoriadispositivo')),
            ],
            options={
                'verbose_name': 'Dispositivo',
                'verbose_name_plural': 'Dispositivi',
                'ordering': ['tipo', 'marca', 'nome'],
            },
        ),
        migrations.CreateModel(
            name='LogSistema',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('livello', models.CharField(choices=[('DEBUG', 'Debug'), ('INFO', 'Informazione'), ('WARNING', 'Avviso'), ('ERROR', 'Errore'), ('CRITICAL', 'Critico')], default='INFO', max_length=10)),
                ('tipo_evento', models.CharField(max_length=30)),
                ('messaggio', models.TextField(verbose_name='Messaggio')),
                ('dettagli', models.JSONField(blank=True, default=dict)),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True)),
                ('timestamp', models.DateTimeField(auto_now_add=True)),
                ('utente', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='logs', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Log Sistema',
                'verbose_name_plural': 'Log Sistema',
                'ordering': ['-timestamp'],
            },
        ),
        migrations.CreateModel(
            name='ProfiloUtente',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nome_utente', models.CharField(help_text='Nome di battesimo', max_length=100, verbose_name='Nome Utente')),
                ('cognome_utente', models.CharField(help_text='Cognome', max_length=100, verbose_name='Cognome Utente')),
                ('sesso_utente', models.CharField(blank=True, choices=[('M', 'Maschio'), ('F', 'Femmina'), ('ALTRO', 'Altro')], max_length=10, verbose_name='Sesso Utente')),
                ('data_nascita_utente', models.DateField(blank=True, null=True, verbose_name='Data Nascita Utente')),
                ('codice_fiscale_utente', models.CharField(blank=True, max_length=16, verbose_name='Codice Fiscale Utente')),
                ('telefono_utente', models.CharField(blank=True, max_length=20, verbose_name='Telefono Utente')),
                ('email_personale_utente', models.EmailField(blank=True, help_text='Email alternativa per comunicazioni', max_length=254, verbose_name='Email Personale Utente')),
                ('numero_matricola_utente', models.CharField(blank=True, help_text='Per studenti e docenti', max_length=20, verbose_name='Numero Matricola Utente')),
                ('classe_utente', models.CharField(blank=True, help_text='Per studenti (es: 5A, 3B)', max_length=20, verbose_name='Classe/Sezione Utente')),
                ('dipartimento_utente', models.CharField(blank=True, help_text='Per docenti', max_length=100, verbose_name='Dipartimento Utente')),
                ('materia_insegnamento_utente', models.CharField(blank=True, help_text='Per docenti', max_length=100, verbose_name='Materia Insegnamento Utente')),
                ('preferenze_notifica_utente', models.JSONField(blank=True, default=dict, help_text='Configurazione notifiche personalizzate', verbose_name='Preferenze Notifica Utente')),
                ('preferenze_lingua_utente', models.CharField(default='it', max_length=10, verbose_name='Lingua Preferita Utente')),
                ('fuso_orario_utente', models.CharField(default='Europe/Rome', max_length=50, verbose_name='Fuso Orario Utente')),
                ('utente_attivo', models.BooleanField(default=True)),
                ('utente_verificato', models.BooleanField(default=False)),
                ('data_verifica_utente', models.DateTimeField(blank=True, null=True)),
                ('ultimo_accesso_utente', models.DateTimeField(blank=True, null=True)),
                ('data_creazione_utente', models.DateTimeField(auto_now_add=True)),
                ('data_modifica_utente', models.DateTimeField(auto_now=True)),
                ('utente', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='profilo_utente', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Profilo Utente',
                'verbose_name_plural': 'Profili Utenti',
            },
        ),
        migrations.CreateModel(
            name='Risorsa',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('nome', models.CharField(default='', max_length=100, verbose_name='Nome')),
                ('codice', models.CharField(max_length=20, unique=True, verbose_name='Codice')),
                ('descrizione', models.TextField(blank=True)),
                ('tipo', models.CharField(choices=[('laboratorio', 'Laboratorio'), ('aula', 'Aula'), ('carrello', 'Carrello Dispositivi'), ('spazio', 'Spazio Comune'), ('attrezzatura', 'Attrezzatura Speciale'), ('ambiente', 'Ambiente Esterno')], max_length=20, verbose_name='Tipo Risorsa')),
                ('categoria', models.CharField(blank=True, max_length=50, verbose_name='Categoria')),
                ('capacita_massima', models.PositiveIntegerField(blank=True, help_text='Per carrelli: numero dispositivi max', null=True)),
                ('postazioni_disponibili', models.PositiveIntegerField(default=0, help_text='Numero postazioni fisiche')),
                ('orari_apertura', models.JSONField(blank=True, default=dict, help_text='Orari di disponibilità per giorno')),
                ('feriali_disponibile', models.BooleanField(default=True)),
                ('weekend_disponibile', models.BooleanField(default=False)),
                ('festivo_disponibile', models.BooleanField(default=False)),
                ('attivo', models.BooleanField(default=True)),
                ('manutenzione', models.BooleanField(default=False)),
                ('bloccato', models.BooleanField(default=False)),
                ('prenotazione_anticipo_minimo', models.PositiveIntegerField(default=1)),
                ('prenotazione_anticipo_massimo', models.PositiveIntegerField(default=30)),
                ('durata_minima_minuti', models.PositiveIntegerField(default=30)),
                ('durata_massima_minuti', models.PositiveIntegerField(default=240)),
                ('allow_overbooking', models.BooleanField(default=False)),
                ('overbooking_limite', models.PositiveIntegerField(default=0)),
                ('note_amministrative', models.TextField(blank=True)),
                ('note_utenti', models.TextField(blank=True)),
                ('creato_il', models.DateTimeField(auto_now_add=True)),
                ('modificato_il', models.DateTimeField(auto_now=True)),
                ('dispositivi', models.ManyToManyField(blank=True, related_name='risorse', to='prenotazioni.dispositivo', verbose_name='Dispositivi Associati')),
                ('localizzazione', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='prenotazioni.ubicazionerisorsa')),
            ],
            options={
                'verbose_name': 'Risorsa',
                'verbose_name_plural': 'Risorse',
                'ordering': ['tipo', 'nome'],
            },
        ),
        migrations.CreateModel(
            name='SessioneUtente',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('data_creazione_sessione', models.DateTimeField(auto_now_add=True, verbose_name='Data Creazione Sessione')),
                ('data_scadenza_sessione', models.DateTimeField(blank=True, null=True, verbose_name='Data Scadenza Sessione')),
                ('data_verifica_sessione', models.DateTimeField(blank=True, null=True, verbose_name='Data Verifica Sessione')),
                ('stato_sessione', models.CharField(choices=[('in_attesa', 'In Attesa'), ('verificato', 'Verificato'), ('scaduto', 'Scaduto'), ('annullato', 'Annullato'), ('fallito', 'Fallito')], default='in_attesa', max_length=20, verbose_name='Stato Sessione')),
                ('metadati_sessione', models.JSONField(blank=True, default=dict, help_text='Dati aggiuntivi della sessione', verbose_name='Metadati Sessione')),
                ('email_destinazione_sessione', models.EmailField(blank=True, help_text='Email destinatario per notifiche o verifiche', max_length=254, null=True, verbose_name='Email Destinazione Sessione')),
                ('tipo_sessione', models.CharField(choices=[('verifica_email', 'Verifica Email'), ('reset_password', 'Reset Password'), ('login_pin', 'Login con PIN'), ('setup_amministratore', 'Setup Amministratore'), ('conferma_prenotazione', 'Conferma Prenotazione')], max_length=30, verbose_name='Tipo Sessione')),
                ('token_sessione', models.UUIDField(default=prenotazioni.models.genera_codice_univoco, unique=True, verbose_name='Token Sessone Unico')),
                ('pin_sessione', models.CharField(blank=True, help_text='Per verifiche PIN', max_length=6, verbose_name='PIN Sessione')),
                ('nome_utente', models.CharField(blank=True, help_text='Nome di battesimo', max_length=100, null=True, verbose_name='Nome Utente')),
                ('cognome_utente', models.CharField(blank=True, help_text='Cognome', max_length=100, null=True, verbose_name='Cognome Utente')),
                ('sesso_utente', models.CharField(blank=True, choices=[('M', 'Maschio'), ('F', 'Femmina'), ('ALTRO', 'Altro')], max_length=10, null=True, verbose_name='Sesso Utente')),
                ('data_nascita_utente', models.DateField(blank=True, null=True, verbose_name='Data Nascita Utente')),
                ('codice_fiscale_utente', models.CharField(blank=True, max_length=16, null=True, verbose_name='Codice Fiscale Utente')),
                ('telefono_utente', models.CharField(blank=True, max_length=20, null=True, verbose_name='Telefono Utente')),
                ('email_personale_utente', models.EmailField(blank=True, help_text='Email alternativa per comunicazioni', max_length=254, null=True, verbose_name='Email Personale Utente')),
                ('utente_sessione', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='sessioni_utente', to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='Prenotazione',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('inizio', models.DateTimeField(verbose_name='Inizio')),
                ('fine', models.DateTimeField(verbose_name='Fine')),
                ('quantita', models.PositiveIntegerField(default=1)),
                ('priorita', models.CharField(choices=[('bassa', 'Bassa'), ('normale', 'Normale'), ('alta', 'Alta'), ('urgente', 'Urgente')], default='normale', max_length=20)),
                ('scopo', models.CharField(blank=True, max_length=200, verbose_name='Scopo della prenotazione')),
                ('note', models.TextField(blank=True)),
                ('note_amministrative', models.TextField(blank=True)),
                ('setup_needed', models.BooleanField(default=False, help_text='Richiede setup/assistenza tecnica')),
                ('cleanup_needed', models.BooleanField(default=False, help_text='Richiede pulizia/riordino')),
                ('approvazione_richiesta', models.BooleanField(default=False)),
                ('data_approvazione', models.DateTimeField(blank=True, null=True)),
                ('notifiche_inviate', models.JSONField(blank=True, default=list)),
                ('ultimo_aggiornamento_notifica', models.DateTimeField(blank=True, null=True)),
                ('creato_il', models.DateTimeField(auto_now_add=True)),
                ('modificato_il', models.DateTimeField(auto_now=True)),
                ('cancellato_il', models.DateTimeField(blank=True, null=True)),
                ('approvato_da', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='prenotazioni_approvate', to=settings.AUTH_USER_MODEL)),
                ('dispositivi_selezionati', models.ManyToManyField(blank=True, related_name='prenotazioni', to='prenotazioni.dispositivo', verbose_name='Dispositivi Specifici')),
                ('utente', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='prenotazioni', to=settings.AUTH_USER_MODEL)),
                ('risorsa', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='prenotazioni', to='prenotazioni.risorsa')),
                ('stato', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='prenotazioni.statoprenotazione')),
            ],
            options={
                'verbose_name': 'Prenotazione',
                'verbose_name_plural': 'Prenotazioni',
                'ordering': ['-inizio'],
            },
        ),
        migrations.CreateModel(
            name='NotificaUtente',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('tipo', models.CharField(max_length=20)),
                ('canale', models.CharField(max_length=20)),
                ('titolo', models.CharField(blank=True, max_length=200)),
                ('messaggio', models.TextField()),
                ('dati_aggiuntivi', models.JSONField(blank=True, default=dict)),
                ('stato', models.CharField(choices=[('pending', 'In Coda'), ('sent', 'Inviata'), ('delivered', 'Consegnata'), ('failed', 'Fallita'), ('cancelled', 'Annullata')], default='pending', max_length=20)),
                ('tentativo_corrente', models.PositiveIntegerField(default=0)),
                ('ultimo_tentativo', models.DateTimeField(blank=True, null=True)),
                ('prossimo_tentativo', models.DateTimeField(blank=True, null=True)),
                ('inviata_il', models.DateTimeField(blank=True, null=True)),
                ('consegnata_il', models.DateTimeField(blank=True, null=True)),
                ('errore_messaggio', models.TextField(blank=True)),
                ('creato_il', models.DateTimeField(auto_now_add=True)),
                ('related_user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='notifiche_riferimento', to=settings.AUTH_USER_MODEL)),
                ('utente', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='notifiche', to=settings.AUTH_USER_MODEL)),
                ('related_booking', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='prenotazioni.prenotazione')),
                ('template', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='prenotazioni.templatenotifica')),
            ],
            options={
                'verbose_name': 'Notifica',
                'verbose_name_plural': 'Notifiche',
                'ordering': ['-creato_il'],
            },
        ),
        migrations.AddIndex(
            model_name='dispositivo',
            index=models.Index(fields=['codice_inventario'], name='prenotazion_codice__3cdf83_idx'),
        ),
        migrations.AddIndex(
            model_name='dispositivo',
            index=models.Index(fields=['tipo', 'stato'], name='prenotazion_tipo_39b8f3_idx'),
        ),
        migrations.AddIndex(
            model_name='dispositivo',
            index=models.Index(fields=['categoria'], name='prenotazion_categor_0406db_idx'),
        ),
        migrations.AddIndex(
            model_name='dispositivo',
            index=models.Index(fields=['attivo'], name='prenotazion_attivo_84ee8c_idx'),
        ),
        migrations.AddIndex(
            model_name='profiloutente',
            index=models.Index(fields=['utente'], name='prenotazion_utente__900051_idx'),
        ),
        migrations.AddIndex(
            model_name='profiloutente',
            index=models.Index(fields=['utente_attivo'], name='prenotazion_utente__4ba910_idx'),
        ),
        migrations.AddIndex(
            model_name='profiloutente',
            index=models.Index(fields=['utente_verificato'], name='prenotazion_utente__84b8c1_idx'),
        ),
        migrations.AddIndex(
            model_name='prenotazione',
            index=models.Index(fields=['utente', 'inizio'], name='prenotazion_utente__e455a4_idx'),
        ),
        migrations.AddIndex(
            model_name='prenotazione',
            index=models.Index(fields=['risorsa', 'inizio', 'fine'], name='prenotazion_risorsa_2bcd55_idx'),
        ),
        migrations.AddIndex(
            model_name='prenotazione',
            index=models.Index(fields=['stato'], name='prenotazion_stato_i_9c5bfb_idx'),
        ),
        migrations.AddIndex(
            model_name='prenotazione',
            index=models.Index(fields=['inizio', 'fine'], name='prenotazion_inizio_11af5c_idx'),
        ),
        migrations.AddIndex(
            model_name='risorsa',
            index=models.Index(fields=['codice'], name='prenotazion_codice_459cba_idx'),
        ),
        migrations.AddIndex(
            model_name='risorsa',
            index=models.Index(fields=['tipo', 'attivo'], name='prenotazion_tipo_60334b_idx'),
        ),
        migrations.AddIndex(
            model_name='risorsa',
            index=models.Index(fields=['localizzazione'], name='prenotazion_localiz_c196bc_idx'),
        ),
        migrations.AddIndex(
            model_name='risorsa',
            index=models.Index(fields=['attivo'], name='prenotazion_attivo_bcfc33_idx'),
        ),
        migrations.AddIndex(
            model_name='risorsa',
            index=models.Index(fields=['manutenzione'], name='prenotazion_manuten_26386c_idx'),
        ),
        migrations.AddIndex(
            model_name='risorsa',
            index=models.Index(fields=['bloccato'], name='prenotazion_bloccat_b30c4e_idx'),
        ),
    ]
